{% extends "base.html.jinja" %}

{% block title %}{{ action }} —Å—Ç–∞—Ç—å–∏{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/create-edit.css') }}">
<style>
.content-editor {
    min-height: 400px;
    font-family: 'Merriweather', 'Georgia', serif;
    line-height: 1.6;
}

.title-input {
    font-size: 1.5rem;
    font-weight: bold;
    font-family: 'Cinzel', serif;
    margin-bottom: 1.5rem;
}
</style>
{% endblock %}

{% block content %}
<div class="create-edit-container">
    <div class="form-header">
        <h1 class="form-title">
            {% if action == "–°–æ–∑–¥–∞–Ω–∏–µ" %}
                ‚úçÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é
            {% else %}
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é
            {% endif %}
        </h1>
        <p class="form-subtitle">
            {% if action == "–°–æ–∑–¥–∞–Ω–∏–µ" %}
                –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ —Å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º D&D
            {% else %}
                –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç–∞—Ç—å—é "{{ article.title }}"
            {% endif %}
        </p>
    </div>

    <div class="form-container">
        <form method="POST" class="main-form">
            {{ form.csrf_token }}
            
            <div class="form-group">
                {{ form.title.label(class="form-label") }}
                {{ form.title(class="form-input title-input", id="title", placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏...") }}
                {% for error in form.title.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
            </div>
            
            <div class="form-group">
                {{ form.content.label(class="form-label") }}
                {{ form.content(class="form-textarea content-editor", id="content",
                                placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à—É —Å—Ç–∞—Ç—å—é –∑–¥–µ—Å—å...\n\n–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç —Å –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏ —Å—Ç—Ä–æ–∫.\n–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏.",
                                rows="20") }}
                {% for error in form.content.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
            </div>
            
            <div class="form-actions">
                {{ form.submit(class="form-button") }}
            </div>
        </form>
        
        {% if article and article.user_id == g.user.id %}
            <form method="POST" action="{{ url_for('articles.delete_article', article_id=article.id) }}" 
                  style="margin-top: 1rem;"
                  onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—å—é \"{{ article.title }}\"? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.');">
                <button type="submit" class="delete-button">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—å—é</button>
            </form>
        {% endif %}
    </div>
</div>
{% endblock %}
